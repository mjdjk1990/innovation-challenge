{"version":3,"sources":["../../src/pages/draw/draw.module.ts","../../src/pages/draw/draw.ts","../../src/components/canvas-draw/canvas-draw.module.ts","../../src/components/canvas-draw/canvas-draw.component.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { DrawPage } from './draw';\nimport { CanvasDrawModule } from '../../components/canvas-draw/canvas-draw.module';\n\n@NgModule({\n  declarations: [\n    DrawPage\n  ],\n  imports: [\n    IonicPageModule.forChild(DrawPage),\n    CanvasDrawModule\n  ],\n})\nexport class DrawPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/draw/draw.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController, LoadingController, Loading } from 'ionic-angular';\nimport { StorageService } from '../../providers/storage.service';\nimport { AlertController } from 'ionic-angular/components/alert/alert-controller';\nimport { Drawing } from '../../models/drawing/drawing.interface';\nimport { DataService } from '../../providers/data.service';\nimport { AuthService } from '../../providers/auth.service';\n\n@IonicPage()\n@Component({\n  selector: 'page-draw',\n  templateUrl: 'draw.html',\n})\nexport class DrawPage {\n\n  drawing: Drawing;\n  loading: Loading;\n\n  constructor(\n    private navCtrl: NavController,\n    private alertCtrl: AlertController,\n    private toast: ToastController,\n    private loadingCtrl: LoadingController,\n    private data: DataService,\n    private auth: AuthService,\n    private storage: StorageService\n  ) {\n  }\n\n  showLoader(content) {\n    if (!this.loading) {\n      this.loading = this.loadingCtrl.create({\n        content: content\n      });\n      this.loading.present();\n    }\n  }\n\n  dismissLoader() {\n    if (this.loading) {\n      this.loading.dismiss();\n      this.loading = null;\n    }\n  }\n\n  showToast(message) {\n    this.toast.create({\n      message: message,\n      duration: 3000,\n      showCloseButton: true\n    }).present();\n  }\n\n  showAlert(message) {\n    this.alertCtrl.create({\n      title: `An error occured!`,\n      message: message,\n      buttons: ['OK'],\n      enableBackdropDismiss: false\n    }).present();\n  }\n\n  showDrawingSelectionOptions() {\n    let prompt = this.alertCtrl.create({\n      title: 'What will you draw?',\n      enableBackdropDismiss: false,\n      inputs : [\n      {\n          type:'radio',\n          checked: true,\n          label:'Kangaroo',\n          value:'kangaroo'\n      },\n      {\n          type:'radio',\n          label:'Curry',\n          value:'curry'\n      }],\n      buttons : [\n      {\n          text: \"Draw it!\",\n          handler: data => {\n            this.drawing.name = data;\n          }\n      }]});\n      prompt.present();\n  }\n\n  async saveCanvas(dataURL) {\n    this.showLoader('Uploading artwork...');\n\n    // upload the image\n    const snapshot = await this.storage.uploadBase64Image(dataURL, 'drawings', `${this.auth.getUid()}${Math.floor(Date.now() / 1000)}`);\n    if (snapshot['error']) {\n      this.showToast(`Unable to upload image! ${snapshot['error']['code']}`);\n    }\n\n    // create database entry for drawing\n    this.drawing.author = this.auth.getUid();\n    this.drawing.path = snapshot['downloadURL'];\n    let result = await this.data.saveDrawing(this.drawing);\n\n    if(!result) {\n      this.showAlert('Error saving drawing!');\n    } else {\n      this.showToast('Drawing created!');\n    }\n    // navigate back to guess page\n    this.navCtrl.parent.select(0);\n    this.dismissLoader();\n  }\n\n  ionViewWillEnter() {\n    this.drawing = {} as Drawing;\n    this.showDrawingSelectionOptions();\n  }\n\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/draw/draw.ts","import { NgModule } from '@angular/core';\r\nimport { CanvasDrawComponent } from './canvas-draw.component';\r\nimport { IonicModule } from 'ionic-angular';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CanvasDrawComponent\r\n  ],\r\n  imports: [\r\n    IonicModule\r\n  ],\r\n  exports: [\r\n    CanvasDrawComponent\r\n  ]\r\n})\r\n\r\nexport class CanvasDrawModule {}\n\n\n// WEBPACK FOOTER //\n// ./src/components/canvas-draw/canvas-draw.module.ts","import { Component, ViewChild, Renderer, EventEmitter, Output, Input } from '@angular/core';\nimport { Platform, Loading, ToastController, LoadingController } from 'ionic-angular';\nimport { StorageService } from '../../providers/storage.service';\nimport { Drawing } from '../../models/drawing/drawing.interface';\n\n@Component({\n  selector: 'canvas-draw',\n  templateUrl: 'canvas-draw.component.html'\n})\nexport class CanvasDrawComponent {\n\n  @ViewChild('myCanvas') canvas: any;\n  @Input('name') name: string;\n  @Output() saveCanvas: EventEmitter<string> = new EventEmitter<string>();\n  \n  canvasElement: any;\n  lastX: number;\n  lastY: number;\n\n  currentColour: string = '#000';\n  availableColours: any;\n\n  brushSize: number = 5;\n\n  mouseDown: boolean;\n\n  constructor(\n    public platform: Platform,\n    public renderer: Renderer\n  ) {\n    this.availableColours = [\n      '#000',\n      '#1abc9c',\n      '#3498db',\n      '#9b59b6',\n      '#e67e22',\n      '#e74c3c',\n      '#fff'\n    ];\n  }\n\n  ngAfterViewInit() {\n\n    this.canvasElement = this.canvas.nativeElement;\n\n    this.renderer.setElementAttribute(this.canvasElement, 'width', this.platform.width() + '');\n    this.renderer.setElementAttribute(this.canvasElement, 'height', this.platform.height() + '');\n\n  }\n\n  ngOnChanges() {\n    if(this.canvasElement) {\n      this.clearCanvas();\n    }\n  }\n\n  changeColour(colour) {\n    this.currentColour = colour;\n  }\n\n  changeSize(size) {\n    this.brushSize = size;\n  }\n\n  handleStart(ev) {\n\n    // this.startedDrawing = true;\n\n    this.lastX = ev.touches ? ev.touches[0].pageX : ev.pageX;\n    this.lastY = ev.touches ? ev.touches[0].pageY : ev.pageY;\n\n    this.mouseDown = true;\n  }\n\n  handleMove(ev) {\n    if (this.mouseDown) {\n\n      let ctx = this.canvasElement.getContext('2d');\n      let currentX = ev.touches ? ev.touches[0].pageX : ev.pageX;\n      let currentY = ev.touches ? ev.touches[0].pageY : ev.pageY;\n\n      ctx.beginPath();\n      ctx.lineJoin = \"round\";\n      ctx.moveTo(this.lastX, this.lastY);\n      ctx.lineTo(currentX, currentY);\n      ctx.closePath();\n      ctx.strokeStyle = this.currentColour;\n      ctx.lineWidth = this.brushSize;\n      ctx.stroke();\n\n      this.lastX = currentX;\n      this.lastY = currentY;\n    }\n  }\n\n  clearCanvas() {\n    // this.startedDrawing = false;\n    let ctx = this.canvasElement.getContext('2d');\n    ctx.clearRect(0, 0, this.canvasElement.width, this.canvasElement.height);\n  }\n\n  async save() {\n    this.saveCanvas.emit(this.canvasElement.toDataURL());\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/canvas-draw/canvas-draw.component.ts"],"sourceRoot":""}